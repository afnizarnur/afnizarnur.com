---
export interface HeaderAction {
    href: string
    label: string
    variant?: "primary" | "secondary" | "ghost"
    external?: boolean
}

export interface Props {
    title: string
    description?: string
    eyebrow?: string
    orientation?: "left" | "center"
    actions?: HeaderAction[]
    headingLevel?: "h1" | "h2" | "h3" | "h4"
}

const {
    title,
    description,
    eyebrow,
    orientation = "left",
    actions = [],
    headingLevel = "h1",
} = Astro.props

const normalizedActions = actions.map((action) => ({
    ...action,
    variant: action.variant ?? "primary",
}))

const hasEyebrowSlot = Astro.slots.has("eyebrow")
const hasMetaSlot = Astro.slots.has("meta")
const hasDefaultSlot = Astro.slots.has("default")
---

<header
    class:list={{
        "mb-48 flex flex-col gap-16": true,
        "items-center text-center": orientation === "center",
    }}
>
    {
        hasEyebrowSlot ? (
            <slot name="eyebrow" />
        ) : (
            eyebrow && (
                <span class="inline-flex items-center gap-8 rounded-full bg-bgColor-accent-primary px-12 py-4 text-xs font-semibold uppercase tracking-wide text-fgColor-accent-primary">
                    {eyebrow}
                </span>
            )
        )
    }

    <component is={headingLevel} class="text-balance text-4xl font-bold text-fgColor-primary sm:text-5xl">
        {title}
    </component>

    {description && <p class="text-balance text-xl text-fgColor-secondary">{description}</p>}

    {hasDefaultSlot && <slot />}

    {
        hasMetaSlot && (
            <div
                class:list={{
                    "flex flex-wrap gap-16": true,
                    "justify-center": orientation === "center",
                }}
            >
                <slot name="meta" />
            </div>
        )
    }

    {
        normalizedActions.length > 0 && (
            <div
                class:list={{
                    "mt-16 flex flex-wrap gap-16": true,
                    "justify-center": orientation === "center",
                }}
            >
                {normalizedActions.map((action) => (
                    <a
                        href={action.href}
                        target={action.external ? "_blank" : undefined}
                        rel={action.external ? "noopener noreferrer" : undefined}
                        class:list={{
                            "inline-flex items-center justify-center gap-8 rounded-full px-16 py-8 text-sm font-semibold transition-colors duration-150": true,
                            "bg-bgColor-accent-solid text-fgColor-white hover:bg-bgColor-accent-solid-hover": action.variant === "primary",
                            "border border-borderColor-primary bg-bgColor-primary text-fgColor-primary hover:bg-bgColor-secondary": action.variant === "secondary",
                            "text-fgColor-primary hover:text-fgColor-accent-primary": action.variant === "ghost",
                        }}
                    >
                        {action.label}
                    </a>
                ))}
            </div>
        )
    }
</header>
