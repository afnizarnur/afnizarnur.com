---
import BaseLayout from "./BaseLayout.astro"
import type { Post } from "@afnizarnur/ui"

export interface Props {
    post: Post
}

const { post } = Astro.props

const seoTitle = post.seo?.title || post.title
const seoDescription = post.seo?.description || post.excerpt
const ogImage = post.coverImage

const formattedDate = new Date(post.publishedAt).toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
})
---

<BaseLayout
    title={seoTitle}
    description={seoDescription}
    ogImage={ogImage}
    type="article"
    publishedTime={post.publishedAt}
>
    <article class="mx-auto max-w-3xl px-4 py-16 sm:px-6 lg:px-8">
        <!-- Post Header -->
        <header class="mb-12">
            <time class="text-sm text-neutral-500" datetime={post.publishedAt}>
                {formattedDate}
            </time>

            <h1 class="mt-2 text-4xl font-bold text-neutral-900 sm:text-5xl">
                {post.title}
            </h1>

            <p class="mt-4 text-xl text-neutral-600">{post.excerpt}</p>

            {/* Tags */}
            {
                post.tags && post.tags.length > 0 && (
                    <div class="mt-6 flex flex-wrap gap-2">
                        {post.tags.map((tag) => (
                            <span class="rounded-full bg-neutral-100 px-3 py-1 text-sm text-neutral-700">
                                {tag.title}
                            </span>
                        ))}
                    </div>
                )
            }
        </header>

        {/* Cover Image */}
        {
            post.coverImage && (
                <figure class="mb-12">
                    <img
                        src={`${post.coverImage}?w=1200&auto=format`}
                        alt={post.coverImageAlt || post.title}
                        class="rounded-lg w-full"
                    />
                </figure>
            )
        }

        {/* Post Content */}
        <div class="prose prose-lg prose-neutral max-w-none">
            <slot />
        </div>
    </article>
</BaseLayout>
