---
import "../styles/global.css"
import ThemeToggle from "../components/ThemeToggle.astro"
import Head from "../components/Head.astro"
import type { Metadata } from "../config/meta"
import { Image } from "astro:assets"
import MenuIcon from "../assets/icons/menu.svg"

interface Props extends Partial<Metadata> {
	title: string
}

const props = Astro.props
---

<!doctype html>
<html lang="en">
	<head>
		<script is:inline>
			const getTheme = () => {
				if (typeof localStorage !== "undefined") {
					const storedTheme = localStorage.getItem("theme")
					if (storedTheme && storedTheme !== "system") {
						return storedTheme
					}
				}
				return window.matchMedia("(prefers-color-scheme: dark)").matches
					? "dark"
					: "light"
			}
			document.documentElement.setAttribute("data-theme", getTheme())
		</script>
		<Head {...props} />
	</head>
	<body>
		<div
			class="min-h-screen bg-[var(--background-default)] text-[var(--text-primary)]"
		>
			<div class="flex flex-col md:flex-row max-w-[1440px] mx-auto p-0">
				<div
					class="w-full md:w-1/3 max-w-full md:max-w-[420px] flex-shrink-0 flex flex-col h-auto md:h-screen border-b md:border-b-0 md:border-r border-[var(--border-default)]"
				>
					<div
						class="flex justify-between items-center p-[24px_24px_0px_48px]"
					>
						<a href="/" class="block" aria-label="Go to homepage">
							<img
								src="/avatar.png"
								alt="Afnizar Nur Ghifari"
								class="rounded-full object-cover"
								width="36"
								height="36"
							/>
						</a>
						<button
							class="bg-transparent border-none cursor-pointer p-1 flex items-center justify-center hover:opacity-70"
							aria-label="Toggle menu"
						>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="24"
								height="24"
								viewBox="0 0 24 24"
								class="fill-[var(--text-primary)]"
							>
								<path d="M2 6h20v2H2zm0 10h20v2H2z"></path>
							</svg>
						</button>
					</div>
					<div class="p-[44px_24px_24px_48px] overflow-y-auto">
						<h1 class="mb-8">Afnizar<br />Nur Ghifari</h1>
						<slot name="sidebar" />
					</div>
				</div>
				<main class="flex-grow p-6 md:p-6">
					<slot />
				</main>
			</div>
		</div>
	</body>
</html>
