---
import "../styles/global.css"
import Head from "../components/Head.astro"
import type { Metadata } from "../config/meta"

interface Props extends Partial<Metadata> {
	title: string
}

const props = Astro.props
---

<!doctype html>
<html lang="en">
	<head>
		<script is:inline>
			const getTheme = () => {
				if (typeof localStorage !== "undefined") {
					const storedTheme = localStorage.getItem("theme")
					if (storedTheme && storedTheme !== "system") {
						return storedTheme
					}
				}
				return window.matchMedia("(prefers-color-scheme: dark)").matches
					? "dark"
					: "light"
			}
			document.documentElement.setAttribute("data-theme", getTheme())
		</script>
		<Head {...props} />
	</head>
	<body>
		<a
			href="#main-content"
			class="skip-link sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:py-2 focus:px-4 focus:bg-bg focus:text-primary focus:border focus:border-border focus:rounded"
			>Skip to main content</a
		>
		<div class="min-h-screen bg-bg text-primary">
			<main class="fade-in">
				<slot />
			</main>
		</div>
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}

	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border-width: 0;
	}
</style>
