---
import "../styles/global.css"
import ThemeToggle from "../components/ThemeToggle.astro"
import Head from "../components/Head.astro"
import type { Metadata } from "../config/meta"

interface Props extends Partial<Metadata> {
	title: string
}

const props = Astro.props
---

<!doctype html>
<html lang="en">
	<head>
		<!-- Prevent FART (Flash of inAccurate coloR Theme) -->
		<script is:inline>
			const getTheme = () => {
				if (typeof localStorage !== "undefined") {
					const storedTheme = localStorage.getItem("theme")
					if (storedTheme && storedTheme !== "system") {
						return storedTheme
					}
				}
				return window.matchMedia("(prefers-color-scheme: dark)").matches
					? "dark"
					: "light"
			}
			document.documentElement.setAttribute("data-theme", getTheme())
		</script>
		<Head {...props} />
	</head>
	<body>
		<div class="min-h-screen bg-background text-text">
			<header class="container mx-auto px-4 py-6">
				<div class="flex justify-between items-center">
					<a href="/" class="text-xl font-bold text-primary"
						>Portfolio</a
					>
					<ThemeToggle />
				</div>
			</header>
			<main class="container mx-auto px-4 py-8">
				<slot />
			</main>
		</div>
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>
