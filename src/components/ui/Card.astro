---
interface Props {
	href?: string
	className?: string
	color?: string
	aspectRatio?: string
	isHoverable?: boolean
	title?: string
}

const {
	href,
	className = "",
	color = "bg-surface",
	aspectRatio = "aspect-[4/3]",
	isHoverable = true,
	title
} = Astro.props

const wrapperClasses = `flex flex-col h-full ${className}`
const imageClasses = `${color} ${aspectRatio} rounded-lg mb-5 ${isHoverable ? "transition-all duration-300 group-hover:shadow-md" : ""}`
const linkClasses =
	"group block no-underline focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 rounded-lg"
---

{
	href ? (
		<a
			href={href}
			class={linkClasses}
			aria-labelledby={
				title
					? `card-title-${title.replace(/\s+/g, "-").toLowerCase()}`
					: undefined
			}
		>
			<div class={wrapperClasses}>
				<div class={imageClasses}>
					<slot name="image" />
				</div>
				<div class="card-content">
					{title && (
						<h3
							id={`card-title-${title.replace(/\s+/g, "-").toLowerCase()}`}
						>
							{title}
						</h3>
					)}
					<slot />
				</div>
			</div>
		</a>
	) : (
		<div class={wrapperClasses}>
			<div class={imageClasses}>
				<slot name="image" />
			</div>
			<div class="card-content">
				{title && (
					<h3
						id={`card-title-${title.replace(/\s+/g, "-").toLowerCase()}`}
					>
						{title}
					</h3>
				)}
				<slot />
			</div>
		</div>
	)
}

<style>
	.card-content :global(h3) {
		@apply text-primary mb-2 font-sans text-body;
	}

	.card-content :global(p) {
		@apply text-secondary;
	}
</style>
