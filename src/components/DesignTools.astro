---
import Section from "./ui/Section.astro"
import Grid from "./ui/Grid.astro"
import Stack from "./ui/Stack.astro"
import LinkWithArrow from "./ui/LinkWithArrow.astro"
import DitherImage from "./ui/DitherImage.astro"
import { Image } from "astro:assets"

// Import placeholder images - replace these with actual images later
// You can add your design tool images to the src/assets/design-tools directory

interface Tool {
	title: string
	description: string
	color: string
	link: string
	image?: ImageMetadata
}

// Add an interface for the dither image props
interface DitherImageProps {
	src: string
	brightness?: number
	contrast?: number
	resolution?: number
	ditherStep?: number
}

const tools: Tool[] = [
	{
		title: "Page Automator",
		description: "Automate the process of creating multiple pages.",
		color: "var(--color-gray-100)",
		link: "https://example.com/page-automator"
	},
	{
		title: "Variant Inspector",
		description: "Automate the process of creating multiple pages.",
		color: "var(--color-gray-100)",
		link: "https://example.com/variant-inspector"
	},
	{
		title: "Split Anything",
		description: "Automate the process of creating multiple pages.",
		color: "var(--color-gray-100)",
		link: "https://example.com/split-anything"
	},
	{
		title: "Design Tokens to Variables",
		description: "Automate the process of creating multiple pages.",
		color: "var(--color-gray-100)",
		link: "https://example.com/design-tokens-to-variables"
	}
]

// Define default dither image properties
const ditherImageProps: DitherImageProps = {
	src: "/designtools.png", // Using an existing image in the public directory
	brightness: 1.8,
	contrast: 1,
	resolution: 130,
	ditherStep: 1.2
}
---

<Section title="Design Tooling" class="pt-6" id="tools-section">
	<Stack gap="xl">
		<div class="dither-section w-full mb-6">
			<div class="dither-header w-full mb-4">
				<DitherImage
					src={ditherImageProps.src}
					brightness={ditherImageProps.brightness}
					contrast={ditherImageProps.contrast}
					resolution={ditherImageProps.resolution}
					ditherStep={ditherImageProps.ditherStep}
					class="w-full rounded-lg"
				/>
			</div>
		</div>

		<div
			class="grid grid-cols-1 md:grid-cols-2 relative border-t border-b border-dashed border-border-high"
		>
			{
				tools.map((tool, index) => (
					<div class="tool-card bg-bg p-6 overflow-hidden relative">
						<div class="tool-icon bg-gray-100 w-8 h-8 rounded-lg mb-5 flex items-center justify-center">
							{tool.image ? (
								<Image
									src={tool.image}
									alt=""
									width={36}
									height={36}
									class="w-8 h-8"
								/>
							) : (
								<div class="w-8 h-8" />
							)}
						</div>

						<h3 class="text-primary font-sans text-body mb-2">
							<LinkWithArrow
								href={tool.link}
								text={tool.title}
								openInNewTab={true}
							/>
						</h3>

						<p class="text-secondary mb-0">{tool.description}</p>

						{/* Horizontal divider for the middle (between top and bottom rows) */}
						{index === 0 || index === 1 ? (
							<div class="absolute bottom-0 left-0 w-full border-b border-dashed border-border-high" />
						) : null}

						{/* Vertical divider for the middle (between left and right columns) */}
						{index === 0 || index === 2 ? (
							<div class="absolute top-0 right-0 h-full border-r border-dashed border-border-high hidden md:block" />
						) : null}
					</div>
				))
			}
		</div>
	</Stack>
</Section>

<style>
	.dither-header {
		height: 200px;
	}

	@media (max-width: 640px) {
		.dither-header {
			height: 50px;
		}
	}
	@media (min-width: 641px) and (max-width: 768px) {
		.dither-header {
			height: 100px;
		}
	}
</style>
