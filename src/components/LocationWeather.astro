---
// Static location data
const location = "Serang, Indonesia"
const lat = -6.1149 // Latitude for Serang
const lon = 106.1502 // Longitude for Serang

// Get current time in Serang (UTC+7)
const now = new Date()
const serangTime = new Date(now.getTime() + 7 * 60 * 60 * 1000)
const hours = serangTime.getUTCHours()
const minutes = serangTime.getUTCMinutes()
const ampm = hours >= 12 ? "PM" : "AM"
const formattedHours = hours % 12 || 12
const formattedMinutes = minutes < 10 ? `0${minutes}` : minutes
const currentTime = `${formattedHours}:${formattedMinutes} ${ampm}`

// OpenWeatherMap API key - replace with your own API key or use environment variable
const WEATHER_API_KEY =
	import.meta.env.OPENWEATHERMAP_API_KEY || "YOUR_API_KEY_HERE"

// Fetch real weather data
let weatherDescription = "Partly Cloudy"
let weatherTemperature = 28

try {
	// Using OpenWeatherMap API
	const response = await fetch(
		`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`
	)

	if (response.ok) {
		const data = await response.json()

		// Get temperature from the API response
		weatherTemperature = Math.round(data.main.temp)

		// Get weather description
		weatherDescription = data.weather[0].description

		// Capitalize first letter of each word in description
		weatherDescription = weatherDescription
			.split(" ")
			.map((word) => word.charAt(0).toUpperCase() + word.slice(1))
			.join(" ")
	}
} catch (error) {
	console.error("Error fetching weather data:", error)
	// Fallback to default values if fetch fails
}

// Temperature humor with more variations
let tempHumor = ""
if (weatherTemperature <= 0) {
	tempHumor = "so cold even polar bears are filing complaints"
} else if (weatherTemperature <= 5) {
	tempHumor = "cold enough to make your nose question its career choice"
} else if (weatherTemperature <= 10) {
	tempHumor = "so cold your phone battery will die just looking at it"
} else if (weatherTemperature <= 15) {
	tempHumor =
		"jacket weather, but the kind where you're still questioning your choice"
} else if (weatherTemperature <= 20) {
	tempHumor =
		"cool enough for one hoodie but not two, it's a fashion challenge"
} else if (weatherTemperature <= 23) {
	tempHumor = "perfect 'I don't need the AC yet' temperature"
} else if (weatherTemperature <= 27) {
	tempHumor = "the rare temperature where nobody is complaining"
} else if (weatherTemperature <= 30) {
	tempHumor = "warm enough to make you reconsider that extra coffee"
} else if (weatherTemperature <= 32) {
	tempHumor = "warm enough to regret your wardrobe choices by noon"
} else if (weatherTemperature <= 35) {
	tempHumor = "hot enough to fry an egg on your laptop"
} else if (weatherTemperature <= 38) {
	tempHumor = "so hot your makeup is considering a divorce from your face"
} else {
	tempHumor = "so hot that asphalt is considering a career change to lava"
}
---

<div class="location-weather p-6">
	<p class="text-sm text-disabled leading-relaxed">
		{currentTime} in Serang with {weatherDescription.toLowerCase()} where it's
		{tempHumor} ({weatherTemperature}&#176;C)
	</p>
</div>
